---
title: 面试
keywords:
- 面试
- mlzhang
description : "面试"
---
### [知乎Go面试题](https://zhuanlan.zhihu.com/p/471490292)

## 如何知道一个对象是分配在栈上还是堆上



Go和C++不同，Go局部变量会进行**逃逸分析**。如果**变量离开作用域后没有被引用**，则**优先**分配到栈上，否则分配到堆上。那么如何判断是否发生了逃逸呢？

`go build -gcflags '-m -m -l' xxx.go`.

关于逃逸的可能情况：变量大小不确定，变量类型不确定，变量分配的内存超过用户栈最大值，暴露给了外部指针